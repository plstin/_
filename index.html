<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>يوسف - Yousef</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f0f2f5;
      color: #222;
      direction: rtl;
      text-align: right;
    }
    main {
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }
    #flagContainer {
      text-align: center;
      margin-bottom: 10px;
    }
    #flagContainer img {
      width: 60px;
      height: auto;
      border-radius: 5px;
    }
    #infoBox {
      background-color: #fff9e6;
      border-right: 5px solid #ff9900;
      padding: 15px 20px;
      border-radius: 8px;
      margin-bottom: 10px;
      font-size: 14px;
      line-height: 1.6;
    }
    #reminderLine {
      font-size: 13px;
      color: #333;
      margin-bottom: 20px;
    }
    .offer-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 14px;
      margin-bottom: 40px;
    }
    .offer-card {
      background: #fff;
      border-radius: 10px;
      padding: 10px;
      cursor: pointer;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
      transition: transform 0.2s ease;
      display: flex;
      align-items: center;
    }
    .offer-card:hover {
      transform: scale(1.02);
    }
    .offer-card img {
      width: 30%;
      height: 90px;
      object-fit: cover;
      border-radius: 8px;
      margin-left: 10px;
      flex-shrink: 0;
    }
    .offer-text {
      width: 70%;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .offer-title {
      font-size: 14px;
      font-weight: bold;
      white-space: normal;
      overflow: visible;
    }
    .no-offers {
      color: red;
      text-align: center;
      font-weight: 700;
      padding: 16px;
      grid-column: 1 / -1;
    }
    @media (max-width: 1000px) {
      .offer-grid { grid-template-columns: repeat(3, 1fr); }
    }
    @media (max-width: 700px) {
      .offer-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 400px) {
      .offer-grid { grid-template-columns: 1fr; }
      .offer-card { flex-direction: column; align-items: flex-start; }
      .offer-card img { width: 100%; margin-left: 0; margin-bottom: 10px; }
      .offer-text { width: 100%; }
    }
  </style>
</head>
<body>
  <main>
    <!-- Flag -->
    <div id="flagContainer">
      <img id="flag" src="https://upload.wikimedia.org/wikipedia/commons/0/00/Flag_of_Palestine.svg" alt="علم فلسطين">
    </div>

    <!-- InfoBox -->
    <div id="infoBox"></div>

    <!-- Reminder Line -->
    <div id="reminderLine"></div>

    <!-- Offers -->
    <div id="offers-container" class="offer-grid"></div>
  </main>

  <script>
    // ================= Texts =================
    const texts = {
      info_ar: "السلام عليكم، إسمي يوسف من فلسطين و حلمي هو أن أصبح مطورا ناجحا، لأكون مصدر فخر لوطني، فلهذا يجب علي الحصول على كمبيوتر، و يمكنكم مساعدتي عن طريق التسجيل بالمجان في المواقع أسفله، فهي تكافئني مقابل الترويج لها، الأمر لا يتطلب أكثر من دقيقة لكل موقع، كلما تسجلتم في مواقع أكثر كلما إقتربت من تحقيق حلمي، و أرجو منكم الدعاء لوالدي بالمغفرة.",
      info_en: "Hello, my name is Yousef from Palestine. My dream is to become a successful developer and make my country proud. To achieve this, I need a computer. You can support me by registering for free on the websites below. Each registration helps me get closer to my dream. I also kindly ask you to pray for my parents.",
      reminder_ar: "حتى بعد إنتهاءكم من جميع التسجيلات، يمكنكم العودة لاحقا لأنني سأضيف مواقع جديدة بإستمرار",
      reminder_en: "Even after you finish all registrations, you can come back later because I will keep adding new sites.",
      noOffers_ar: "❌ لا توجد عروض متاحة حالياً",
      noOffers_en: "❌ No offers available at the moment"
    };

    // ================= Arabic-speaking countries =================
    const arabicCountries = [
      "AE","SA","EG","MA","DZ","LY","TN","YE","SD","SY","IQ","JO","KW","BH","QA","OM","PS","MR","SO","LB","KM"
    ];

    let isArabic = false;

    // Detect country via IP
    async function detectCountryAndSetText() {
      try {
        const res = await fetch("https://ipapi.co/json/");
        const data = await res.json();
        const countryCode = data.country_code;
        isArabic = arabicCountries.includes(countryCode);

        document.getElementById("infoBox").innerText = isArabic ? texts.info_ar : texts.info_en;
        document.getElementById("reminderLine").innerText = isArabic ? texts.reminder_ar : texts.reminder_en;
      } catch (err) {
        console.error("Country detection failed, defaulting to English:", err);
        document.getElementById("infoBox").innerText = texts.info_en;
        document.getElementById("reminderLine").innerText = texts.reminder_en;
      }
    }

    detectCountryAndSetText();

    // ================= Offer Handling =================
    const container = document.getElementById("offers-container");
    let cpagripOffersCount = 0;
    let ogadsOffersCount = 0;

    function checkNoOffers() {
      if (cpagripOffersCount === 0 && ogadsOffersCount === 0) {
        container.innerHTML = `<div class="no-offers">${isArabic ? texts.noOffers_ar : texts.noOffers_en}</div>`;
      }
    }

    // ============= CPA Grip =============
    (function() {
      const url = "https://www.cpagrip.com/common/offer_feed_json.php?user_id=2439739&pubkey=23311a81282b777eab88a6d19f0d9493&tracking_id=";

      fetch(url)
        .then(res => res.json())
        .then(data => {
          const offers = data.offers || data;
          if (offers && offers.length) {
            offers.filter(o => parseFloat(o.payout) >= 0.5).forEach(o => {
              cpagripOffersCount++;
              const card = document.createElement("div");
              card.className = "offer-card";
              card.innerHTML = `
                <img src="${o.offerphoto || ''}" alt="Offer">
                <div class="offer-text">
                  <div class="offer-title">${o.title || 'No title'}</div>
                </div>
              `;
              card.onclick = () => { if (o.offerlink) window.open(o.offerlink, "_blank"); };
              container.appendChild(card);
            });
          }
          checkNoOffers();
        })
        .catch(err => {
          console.error("CPA Grip error:", err);
          checkNoOffers();
        });
    })();

    // ============= OGAds =============
    (function() {
      const apiKey = "34829|nJfCK9PNtqv8s0cqEl943LhDfd3ufQMGcNc2ZdCT429ec4af";

      async function fetchOgads() {
        try {
          const ipRes = await fetch("https://api.ipify.org?format=json");
          const ipData = await ipRes.json();
          const apiUrl = new URL("https://unlockcontent.net/api/v2");
          apiUrl.searchParams.append("ip", ipData.ip);
          apiUrl.searchParams.append("user_agent", navigator.userAgent);
          apiUrl.searchParams.append("limit", "1000");
          apiUrl.searchParams.append("ctype", "0");

          const res = await fetch(apiUrl, { headers: { Authorization: `Bearer ${apiKey}` } });
          if (!res.ok) throw new Error("OGAds fetch failed");
          const data = await res.json();
          const offers = data.offers || [];
          if (offers && offers.length) {
            offers.filter(o => parseFloat(o.payout) >= 0.5).forEach(o => {
              ogadsOffersCount++;
              const card = document.createElement("div");
              card.className = "offer-card";
              const img = o.icon_url || o.picture || "";
              const title = o.name || o.name_short || "No title";
              const url = o.click_url || o.link || o.offer_url || o.url;

              card.innerHTML = `
                <img src="${img}" alt="Offer">
                <div class="offer-text">
                  <div class="offer-title">${title}</div>
                </div>
              `;
              card.onclick = () => { if (url) window.open(url, "_blank"); };
              container.appendChild(card);
            });
          }
          checkNoOffers();
        } catch (err) {
          console.error("OGAds error:", err);
          checkNoOffers();
        }
      }

      fetchOgads();
    })();
  </script>
</body>
</html>





